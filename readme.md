# ArbitBot - Auto Trading Setup Guide

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
```bash
npm install
```

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è .env —Ñ–∞–π–ª—É
```bash
cp .env.example .env
```

–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `.env` —Ñ–∞–π–ª —ñ –¥–æ–¥–∞–π—Ç–µ –≤–∞—à—ñ API –∫–ª—é—á—ñ –≤—ñ–¥ –±—ñ—Ä–∂:

```env
# –í–ê–ñ–õ–ò–í–û: –°–ø–æ—á–∞—Ç–∫—É —Ç–µ—Å—Ç—É–π—Ç–µ –Ω–∞ sandbox/testnet!
TEST_MODE=true

# API –∫–ª—é—á—ñ –¥–ª—è –±—ñ—Ä–∂
BINANCE_API_KEY=your_api_key
BINANCE_SECRET=your_secret

BYBIT_API_KEY=your_api_key
BYBIT_SECRET=your_secret

# ... —ñ–Ω—à—ñ –±—ñ—Ä–∂—ñ
```

### 3. –ü–æ—á–∞—Ç–∫–æ–≤–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è (–ë–ï–ó —Ç–æ—Ä–≥—ñ–≤–ª—ñ)
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±–µ–∑ –∞–≤—Ç–æ—Ç–æ—Ä–≥—ñ–≤–ª—ñ
TRADING_ENABLED=false npm run dev
```

–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ:
- ‚úÖ –í—Å—ñ –±—ñ—Ä–∂—ñ –ø—ñ–¥–∫–ª—é—á–∏–ª–∏—Å—å
- ‚úÖ –¶—ñ–Ω–∏ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è
- ‚úÖ Order books –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è
- ‚úÖ –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –∞—Ä–±—ñ—Ç—Ä–∞–∂—É –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è

### 4. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ Sandbox/Testnet

**–û–ë–û–í'–Ø–ó–ö–û–í–û** —Å–ø–æ—á–∞—Ç–∫—É —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –Ω–∞ testnet:

```env
TEST_MODE=true
TRADING_ENABLED=true
CROSS_TRADING_ENABLED=true

# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –º–∞–ª—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
CROSS_MAX_POSITION_SIZE=10
MAX_DAILY_LOSS=5
MAX_DAILY_TRADES=10
```

### 5. Production (—Ä–µ–∞–ª—å–Ω–∞ —Ç–æ—Ä–≥—ñ–≤–ª—è)

‚ö†Ô∏è **–¢–Ü–õ–¨–ö–ò –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ testnet!**

```env
TEST_MODE=false
TRADING_ENABLED=true
CROSS_TRADING_ENABLED=true
TRIANGULAR_TRADING_ENABLED=true

# –†–µ–∞–ª—å–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è
CROSS_MAX_POSITION_SIZE=100
TRIANGULAR_MAX_POSITION_SIZE=100
MAX_DAILY_LOSS=50
MAX_DAILY_TRADES=100
```

## üìä –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Ç–æ—Ä–≥—ñ–≤–ª—ñ

### –û—Å–Ω–æ–≤–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å | –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è |
|----------|------|------------------------|
| `TRADING_ENABLED` | –ì–ª–æ–±–∞–ª—å–Ω–µ –≤–º–∏–∫–∞–Ω–Ω—è —Ç–æ—Ä–≥—ñ–≤–ª—ñ | `false` (–¥–ª—è –ø–æ—á–∞—Ç–∫—É) |
| `CROSS_TRADING_ENABLED` | Cross-exchange –∞—Ä–±—ñ—Ç—Ä–∞–∂ | `true` |
| `TRIANGULAR_TRADING_ENABLED` | Triangular –∞—Ä–±—ñ—Ç—Ä–∞–∂ | `true` |

### Cross-Exchange –ø–∞—Ä–∞–º–µ—Ç—Ä–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å | –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è |
|----------|------|------------------------|
| `CROSS_MIN_PROFIT` | –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –ø—Ä–∏–±—É—Ç–æ–∫ (%) | `0.5` |
| `CROSS_MAX_POSITION_SIZE` | –ú–∞–∫—Å. —Ä–æ–∑–º—ñ—Ä –ø–æ–∑–∏—Ü—ñ—ó (USDT) | `100` |
| `CROSS_MAX_CONCURRENT` | –ú–∞–∫—Å. –æ–¥–Ω–æ—á–∞—Å–Ω–∏—Ö —Ç—Ä–µ–π–¥—ñ–≤ | `3` |

### Triangular –ø–∞—Ä–∞–º–µ—Ç—Ä–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å | –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è |
|----------|------|------------------------|
| `TRIANGULAR_MIN_PROFIT` | –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –ø—Ä–∏–±—É—Ç–æ–∫ (%) | `0.8` |
| `TRIANGULAR_MAX_POSITION_SIZE` | –ú–∞–∫—Å. —Ä–æ–∑–º—ñ—Ä –ø–æ–∑–∏—Ü—ñ—ó (USDT) | `100` |
| `TRIANGULAR_MAX_CONCURRENT` | –ú–∞–∫—Å. –æ–¥–Ω–æ—á–∞—Å–Ω–∏—Ö —Ç—Ä–µ–π–¥—ñ–≤ | `2` |

### Risk Management

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å | –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è |
|----------|------|------------------------|
| `MAX_DAILY_LOSS` | –ú–∞–∫—Å. –¥–µ–Ω–Ω–∏–π –∑–±–∏—Ç–æ–∫ (USDT) | `50` |
| `MAX_DAILY_TRADES` | –ú–∞–∫—Å. –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç—Ä–µ–π–¥—ñ–≤/–¥–µ–Ω—å | `100` |
| `BLACKLISTED_SYMBOLS` | –ó–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ —Å–∏–º–≤–æ–ª–∏ | ` ` (–ø–æ—Ä–æ–∂–Ω—å–æ) |
| `BLACKLISTED_EXCHANGES` | –ó–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ –±—ñ—Ä–∂—ñ | ` ` (–ø–æ—Ä–æ–∂–Ω—å–æ) |

## üéÆ API Endpoints –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è

### –í–º–∏–∫–∞–Ω–Ω—è/–≤–∏–º–∏–∫–∞–Ω–Ω—è —Ç–æ—Ä–≥—ñ–≤–ª—ñ

```bash
# –£–≤—ñ–º–∫–Ω—É—Ç–∏ —Ç–æ—Ä–≥—ñ–≤–ª—é
curl -X POST http://localhost:3000/api/trading/enable

# –í–∏–º–∫–Ω—É—Ç–∏ —Ç–æ—Ä–≥—ñ–≤–ª—é
curl -X POST http://localhost:3000/api/trading/disable

# –û—Ç—Ä–∏–º–∞—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
curl http://localhost:3000/api/trading/stats
```

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ—Ä–≥—ñ–≤–ª—ñ
curl http://localhost:3000/api/trading/stats

# Risk manager stats
curl http://localhost:3000/api/stats
```

## üìù –õ–æ–≥–∏

### –õ–æ–∫–∞—Ü—ñ—è –ª–æ–≥—ñ–≤

```
./logs/
‚îú‚îÄ‚îÄ app.log              # –ó–∞–≥–∞–ª—å–Ω—ñ –ª–æ–≥–∏
‚îî‚îÄ‚îÄ trades/
    ‚îú‚îÄ‚îÄ trades-2024-01-15.jsonl   # –î–µ—Ç–∞–ª—å–Ω—ñ –ª–æ–≥–∏ —Ç—Ä–µ–π–¥—ñ–≤
    ‚îî‚îÄ‚îÄ summary-2024-01-15.txt    # –î–µ–Ω–Ω–∏–π –∑–≤—ñ—Ç
```

### –§–æ—Ä–º–∞—Ç –ª–æ–≥—ñ–≤ —Ç—Ä–µ–π–¥—ñ–≤ (JSONL)

–ö–æ–∂–µ–Ω —Ç—Ä–µ–π–¥ –ª–æ–≥—É—î—Ç—å—Å—è –≤ –æ–∫—Ä–µ–º–∏–π —Ä—è–¥–æ–∫ —É —Ñ–æ—Ä–º–∞—Ç—ñ JSON:

```json
{
  "id": "uuid",
  "opportunityId": "uuid",
  "opportunityType": "cross-exchange",
  "status": "completed",
  "orders": [...],
  "profit": {
    "netProfit": 1.25,
    "profitPercent": 1.25,
    "fees": {...}
  },
  "executionTimeMs": 1234
}
```

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤—ñ –ø—Ä–∏–º—ñ—Ç–∫–∏

### –ë–µ–∑–ø–µ–∫–∞

1. **–ù–Ü–ö–û–õ–ò** –Ω–µ –∫–æ–º—ñ—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª –≤ git
2. **–ó–ê–í–ñ–î–ò** –ø–æ—á–∏–Ω–∞–π—Ç–µ –∑ `TEST_MODE=true`
3. **–û–ë–û–í'–Ø–ó–ö–û–í–û** —Ç–µ—Å—Ç—É–π—Ç–µ –Ω–∞ testnet –ø–µ—Ä–µ–¥ production
4. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ API –∫–ª—é—á—ñ –∑ –æ–±–º–µ–∂–µ–Ω–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏ (—Ç—ñ–ª—å–∫–∏ —Ç–æ—Ä–≥—ñ–≤–ª—è, –±–µ–∑ withdrawal)

### –ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –±–∞–ª–∞–Ω—Å–∏

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å —â–æ –º–∞—î—Ç–µ –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –∫–æ—à—Ç—ñ–≤ –Ω–∞ –±—ñ—Ä–∂–∞—Ö:

- **Cross-exchange**: –ú—ñ–Ω—ñ–º—É–º `CROSS_MAX_POSITION_SIZE * 2` –Ω–∞ –∫–æ–∂–Ω—ñ–π –±—ñ—Ä–∂—ñ
- **Triangular**: –ú—ñ–Ω—ñ–º—É–º `TRIANGULAR_MAX_POSITION_SIZE` –≤ USDT –Ω–∞ Bybit

### –ö–æ–º—ñ—Å—ñ—ó –±—ñ—Ä–∂

–í—Ä–∞—Ö–æ–≤—É–π—Ç–µ –∫–æ–º—ñ—Å—ñ—ó –ø—Ä–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—ñ `MIN_PROFIT`:

| –ë—ñ—Ä–∂–∞ | Maker | Taker |
|-------|-------|-------|
| Binance | 0.1% | 0.1% |
| Bybit | 0.1% | 0.1% |
| Coinbase | 0.4% | 0.6% |

## üêõ Troubleshooting

### –¢–æ—Ä–≥—ñ–≤–ª—è –Ω–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `TRADING_ENABLED=true`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–æ—Å—Ç–∞—Ç–Ω—ñ—Å—Ç—å –±–∞–ª–∞–Ω—Å—ñ–≤
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø–æ–º–∏–ª–∫–∏
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –Ω–µ –¥–æ—Å—è–≥–Ω—É—Ç–æ –¥–µ–Ω–Ω–∏—Ö –ª—ñ–º—ñ—Ç—ñ–≤

### Emergency Stop —Å–ø—Ä–∞—Ü—é–≤–∞–≤

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∏—á–∏–Ω—É
curl http://localhost:3000/api/trading/stats

# –°–∫–∏–Ω—å—Ç–µ emergency stop (—è–∫—â–æ –ø—Ä–∏—á–∏–Ω–∞ —É—Å—É–Ω–µ–Ω–∞)
# –ü–æ—Ç—Ä—ñ–±–Ω–æ –±—É–¥–µ –¥–æ–¥–∞—Ç–∏ endpoint –∞–±–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏
```

### –ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –±–∞–ª–∞–Ω—Å—É

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –±–∞–ª–∞–Ω—Å–∏
curl http://localhost:3000/api/prices

# –ü–æ–ø–æ–≤–Ω—ñ—Ç—å –±–∞–ª–∞–Ω—Å–∏ –Ω–∞ –±—ñ—Ä–∂–∞—Ö
# –ê–±–æ –∑–º–µ–Ω—à—ñ—Ç—å MAX_POSITION_SIZE
```

## üìà –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

### –ö–ª—é—á–æ–≤—ñ –º–µ—Ç—Ä–∏–∫–∏

- **Success Rate**: –ü–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ >90%
- **Average Execution Time**: <2000ms –¥–ª—è cross-exchange, <3000ms –¥–ª—è triangular
- **Daily Profit**: –í—ñ–¥—Å—Ç–µ–∂—É–π—Ç–µ —â–æ–¥–µ–Ω–Ω–∏–π –ø—Ä–∏–±—É—Ç–æ–∫
- **Slippage**: –ú–∞—î –±—É—Ç–∏ <1% –¥–ª—è –±—ñ–ª—å—à–æ—Å—Ç—ñ —Ç—Ä–µ–π–¥—ñ–≤

### WebSocket –¥–ª—è real-time –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É

```javascript
const ws = new WebSocket('ws://localhost:8080');

ws.on('message', (data) => {
  const event = JSON.parse(data);
  
  if (event.type === 'trade_completed') {
    console.log('Trade completed:', event.data);
  }
  
  if (event.type === 'emergency_stop') {
    console.log('EMERGENCY STOP!', event.data);
  }
});
```

## üîß –†–æ–∑—à–∏—Ä–µ–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –î–æ–¥–∞–≤–∞–Ω–Ω—è —Å–∏–º–≤–æ–ª—ñ–≤ –¥–ª—è —Ç–æ—Ä–≥—ñ–≤–ª—ñ

–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `src/server.ts`:

```typescript
this.exchangeManager!.createWebSockets([
    'BTC/USDT',
    'ETH/USDT',
    'YOUR/SYMBOL',  // –î–æ–¥–∞–π—Ç–µ —Ç—É—Ç
]);
```

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö triangular paths

–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `src/services/TriangularBybitService.ts`:

```typescript
private readonly paths: TriangularPath[] = [
    {
        symbols: ['BTC/USDT', 'ETH/BTC', 'ETH/USDT'],
        directions: ['buy', 'buy', 'sell'],
        minAmount: 100,
        description: 'USDT ‚Üí BTC ‚Üí ETH ‚Üí USDT'
    },
    // –î–æ–¥–∞–π—Ç–µ –Ω–æ–≤–∏–π path —Ç—É—Ç
];
```

## üìû Support

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º–∏, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ:
1. –õ–æ–≥–∏ –≤ `./logs/`
2. API endpoints —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
3. –ë–∞–ª–∞–Ω—Å–∏ –Ω–∞ –±—ñ—Ä–∂–∞—Ö
4. –ü—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å API –∫–ª—é—á—ñ–≤
